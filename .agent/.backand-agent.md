# Backend Agent Guidelines

Este arquivo atua como um √≠ndice central de regras e documenta√ß√£o para o desenvolvimento backend (NestJS + GraphQL + TypeORM).

**Instru√ß√£o Principal:** N√£o carregue todos os arquivos de documenta√ß√£o detalhada no contexto desnecessariamente. Consulte o arquivo espec√≠fico abaixo apenas quando a tarefa exigir.

## üìö √çndice de Documenta√ß√£o (Sob Demanda)

| Tarefa / T√≥pico             | Arquivo para Consultar          | O que buscar                                                              |
| :-------------------------- | :------------------------------ | :------------------------------------------------------------------------ |
| **Criar Tabelas/Entidades** | `.agent/doc-entity.md`          | Padr√£o TypeORM + GraphQL, decorators duplos, UUIDs.                       |
| **Criar Inputs/DTOs**       | `.agent/doc-dto.md`             | `@InputType`, valida√ß√µes `class-validator`, mensagens de erro expl√≠citas. |
| **Regras de Neg√≥cio**       | `.agent/doc-service.md`         | Services, inje√ß√£o de reposit√≥rios, tratamento de erros.                   |
| **Expor API GraphQL**       | `.agent/doc-resolver.md`        | Resolvers, `@Query`, `@Mutation`, Guards, `@CurrentUser`.                 |
| **Criar Testes**            | `.agent/doc-tests.md`           | **Integra√ß√£o com `pg-mem`** (Preferencial), Mocks para Guards.            |
| **Alterar Banco de Dados**  | `.agent/doc-migration.md`       | Workflow de Migrations (`migration:generate`), split de rela√ß√µes.         |
| **Popular Banco**           | `.agent/doc-seed.md`            | Criar Seeders, usar Services nos seeds.                                   |
| **Git & Versionamento**     | `.agent/git-commit-patterns.md` | Formato de mensagem, agrupamento de arquivos.                             |

## ‚õî Regras Estritas de Git (Commit & Push)

1.  **Autoriza√ß√£o Expl√≠cita:** NUNCA realize um commit sem que o usu√°rio pe√ßa explicitamente (ex: "fa√ßa o commit", "pode comitar").
2.  **Fluxo de Espera:** Mesmo ao finalizar uma feature, **N√ÉO comite** automaticamente. Informe que terminou e aguarde a instru√ß√£o.
3.  **Altera√ß√µes Posteriores:** Se voc√™ fez um commit e depois precisou alterar algo (bugfix ou refatora√ß√£o), **N√ÉO comite novamente** sem nova autoriza√ß√£o.
4.  **Push:** NUNCA fa√ßa `git push` a menos que explicitamente solicitado.
5.  **Formato:** Quando autorizado, consulte sempre `git-commit-patterns.md` para garantir o padr√£o da mensagem.

## üõ†Ô∏è Padr√µes Gerais

- **Stack:** NestJS, TypeORM, GraphQL (Code First).
- **Ids:** Sempre use UUID.
- **Valida√ß√£o:** Valide inputs no DTO, regras de neg√≥cio no Service.
- **Documenta√ß√£o:** Adicione `description` nos campos GraphQL (`@Field`).
